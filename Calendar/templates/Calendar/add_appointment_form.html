{% extends 'forms/form_template.html' %}
{% block js %}
    <h1>{{ form.errors }}</h1>
    <script>
        $('#id_patient').select2({
            ajax: {
                url: "/patients/patients/",
                dataType: 'json',
                delay: 250,
                data: function (params) {
                    return {
                        q: params.term, // search term
                    };
                },
                processResults: function (data) {
                    return {
                        results: $.map(data, function (obj) {
                            console.log(obj.name, obj.id);
                            return {id: obj.id, text: obj.name}
                        })
                    };
                }
            },
            placeholder: 'بحث عن المرضي',
            minimumInputLength: 1,
        });
    </script>
{% endblock %}